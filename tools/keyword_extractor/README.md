# 技术关键词提取工具

## 概述

这是一个从问答数据中自动提取技术关键词的工具，用于增强质量评分系统的关键词库。

## 功能特性

- **智能提取**：从客服回复中自动识别技术相关关键词
- **中英文支持**：同时支持中文和英文关键词识别
- **频次统计**：统计每个关键词的出现频率
- **分类标注**：自动将关键词分类（API、存储、网络、错误、配置等）
- **停用词过滤**：过滤常见停用词和低价值词汇
- **可配置阈值**：支持设置最小频次阈值

## 使用方法

### 基本用法

```bash
cd tools/keyword_extractor
go run main.go <输入JSON文件> <输出JSON文件> [最小频次]
```

### 参数说明

- `输入JSON文件`：与 transformer 工具相同的问答数据文件
- `输出JSON文件`：输出的关键词列表文件（JSON 格式）
- `最小频次`：可选参数，默认为 2，只输出出现次数大于等于该值的关键词

### 示例

```bash
# 使用默认阈值（最小频次 = 2）
go run main.go ../example_qa_data.json keywords.json

# 指定最小频次为 3
go run main.go ../example_qa_data.json keywords.json 3

# 使用实际的问答数据文件
go run main.go /path/to/qa_data.json keywords_output.json 5
```

## 输入数据格式

输入文件应该是一个 JSON 数组，包含历史问答记录，格式与 `transformer` 工具相同：

```json
[
  {
    "id": 123456,
    "title": "问题标题",
    "description": "问题描述",
    "category": "分类",
    "replies": [
      {
        "content": "回复内容",
        "owner": "customer"
      },
      {
        "content": "客服回复内容",
        "owner": "agent"
      }
    ]
  }
]
```

## 输出数据格式

输出文件是一个 JSON 数组，包含提取的关键词及其统计信息：

```json
[
  {
    "keyword": "API",
    "frequency": 15,
    "category": "API相关"
  },
  {
    "keyword": "token",
    "frequency": 12,
    "category": "API相关"
  },
  {
    "keyword": "域名",
    "frequency": 10,
    "category": "网络相关"
  }
]
```

### 字段说明

- `keyword`：提取的关键词
- `frequency`：该关键词在所有客服回复中出现的次数
- `category`：关键词分类
  - API相关：api, sdk, token, 接口, 调用, 请求
  - 存储相关：bucket, 空间, 存储, 上传, 下载, 文件
  - 网络相关：域名, dns, 证书, ssl, cdn, http, https
  - 错误相关：错误, 报错, 异常, 失败, error
  - 配置相关：配置, 参数, 设置, 选项
  - 其他技术：不属于以上分类的技术关键词

## 关键词识别规则

工具使用以下规则识别技术关键词：

1. **英文关键词**：所有英文单词（2个字符以上）
2. **技术模式匹配**：包含以下技术相关词汇的中文词组
   - 错误处理：错误、报错、异常、失败、问题
   - 配置管理：配置、设置、参数、选项、功能
   - 文件操作：文件、上传、下载、存储、空间
   - 网络相关：域名、证书、解析、绑定、备案
   - API相关：接口、调用、请求、响应、返回
   - 其他：代码、数据、格式、权限、转码等
3. **数字关键词**：包含数字且长度 ≥ 3 的词组（如：404错误、http2）
4. **停用词过滤**：自动过滤"您好"、"麻烦"、"稍等"等常见礼貌用语

## 应用场景

### 1. 扩充质量评分系统的关键词库

```bash
# 提取高频关键词（出现 5 次以上）
go run main.go ../example_qa_data.json high_freq_keywords.json 5

# 查看提取结果，选择有价值的关键词
cat high_freq_keywords.json

# 将这些关键词添加到 transformer/main.go 的 techKeywords 列表中
```

### 2. 分析技术问题分布

通过关键词的频次和分类，可以了解：
- 用户最常遇到的技术问题类型
- API/SDK 使用的热点问题
- 存储、网络、配置等不同领域的问题分布

### 3. 持续优化关键词库

定期使用新的问答数据运行提取工具，发现新出现的技术关键词，持续更新质量评分系统。

## 技术实现

- **HTML 清理**：使用 `golang.org/x/net/html` 解析和清理 HTML 标签
- **中文分词**：使用滑动窗口方法提取 2-6 字的中文词组
- **英文提取**：使用正则表达式匹配英文单词
- **停用词过滤**：内置常见停用词列表

## 依赖项

```bash
go get golang.org/x/net/html
```

## 注意事项

1. **数据量**：建议使用较大的数据集（100+ 条问答）以获得更准确的关键词统计
2. **阈值调整**：根据数据量调整最小频次阈值
   - 小数据集（< 100 条）：建议阈值 1-2
   - 中等数据集（100-1000 条）：建议阈值 3-5
   - 大数据集（> 1000 条）：建议阈值 5-10
3. **人工审核**：自动提取的关键词建议经过人工审核后再应用到质量评分系统
4. **分类调整**：可以根据业务需求修改 `categorizeKeyword` 函数中的分类逻辑

## 与 transformer 工具的配合使用

1. 首先运行 `keyword_extractor` 提取关键词
2. 审核提取的关键词列表
3. 将有价值的关键词添加到 `transformer/main.go` 的 `techKeywords` 数组中
4. 运行 `transformer` 进行质量评分和数据转换

## 后续改进方向

- [ ] 支持自定义停用词列表（从配置文件读取）
- [ ] 支持自定义分类规则（从配置文件读取）
- [ ] 添加 TF-IDF 算法优化关键词权重
- [ ] 支持多语言（除中英文外的其他语言）
- [ ] 集成专业分词库（如 jieba）提升中文分词准确度
- [ ] 支持关键词词性标注（名词、动词等）
